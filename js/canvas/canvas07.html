<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        img {
            vertical-align: top;
        }

        canvas {
            vertical-align: top;
        }
    </style>
</head>

<body>
    <img src="./flower.jpg" alt="">
    <canvas id="drawing" width="350" height="350"></canvas>

    <script>
        window.onload = function() {
            let drawing = document.querySelector("#drawing");
    
            if (drawing.getContext) {
                let context = drawing.getContext("2d");
                let image = document.images[0];
                let red, green, blue, alpha;
                let average;
    
                context.drawImage(image, 0, 0);

                let imageData = context.getImageData(0, 0, image.width, image.height);
                let data = imageData.data;

                for (let i = 0, len = data.length; i < len; i += 4) {
                    red = data[i];
                    green = data[i + 1];
                    blue = data[i + 2];
                    alpha = data[i + 3];

                    average = Math.floor((red + green + blue) / 3);

                    data[i] = average;
                    data[i + 1] = average;
                    data[i + 2] = average;
                }

                imageData.data = data;
                context.putImageData(imageData, 0, 0)
                console.log(context.createImageData(100, 100));
            }
        }
    </script>
</body>

</html>